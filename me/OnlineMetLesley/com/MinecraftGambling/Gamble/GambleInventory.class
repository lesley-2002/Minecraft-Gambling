package me.OnlineMetLesley.com.MinecraftGambling.Gamble;

import me.OnlineMetLesley.com.MinecraftGambling.Main;
import me.OnlineMetLesley.com.MinecraftGambling.LowOrHigh.LowOrHighInventory;
import me.OnlineMetLesley.com.MinecraftGambling.LowOrHigh.setItemClass;
import org.bukkit.Bukkit;
import org.bukkit.ChatColor;
import org.bukkit.Material;
import org.bukkit.entity.Player;
import org.bukkit.event.EventHandler;
import org.bukkit.event.Listener;
import org.bukkit.event.inventory.InventoryClickEvent;
import org.bukkit.inventory.Inventory;
import org.bukkit.inventory.InventoryHolder;
import org.bukkit.inventory.ItemStack;
import org.bukkit.inventory.meta.ItemMeta;
import org.bukkit.plugin.Plugin;

public class GambleInventory implements Listener {
   public static Plugin instance;
   public static Inventory gamble;
   public static ItemStack gamemodeloworhigh;

   static {
      gamble = Bukkit.getServer().createInventory((InventoryHolder)null, 9, ChatColor.translateAlternateColorCodes('&', Main.instance.getConfig().getString("GambleGUI.Displayname")));
      gamemodeloworhigh = new ItemStack(Material.valueOf(Main.instance.getConfig().getString("GambleGUI.Low-or-high.Material")));
   }

   public void function() {
      Main plugin = (Main)Main.instance;
      plugin.getServer();
   }

   @EventHandler
   public void OnInventoryClick(InventoryClickEvent event) {
      Player player = (Player)event.getWhoClicked();
      if (event.getClickedInventory().equals(gamble)) {
         event.setCancelled(true);
         if (event.getCurrentItem().equals(gamemodeloworhigh)) {
            player.sendMessage(ChatColor.translateAlternateColorCodes('&', Main.instance.getConfig().getString("Opened-Low-Or-High-GUI")));
            setItemClass.setitems();
            player.closeInventory();
            player.openInventory(LowOrHighInventory.loworhigh);
            player.sendMessage(ChatColor.translateAlternateColorCodes('&', Main.instance.getConfig().getString("Choose-Low-Or-High-Message")));
         }
      }

   }

   public static void setGambleitems() {
      ItemMeta meta = gamemodeloworhigh.getItemMeta();
      meta.setDisplayName(ChatColor.translateAlternateColorCodes('&', Main.instance.getConfig().getString("GambleGUI.Low-or-high.Displayname")));
      gamemodeloworhigh.setItemMeta(meta);
      gamble.setItem(0, LowOrHighInventory.MIDDLE_PANE);
      gamble.setItem(1, LowOrHighInventory.MIDDLE_PANE);
      gamble.setItem(2, LowOrHighInventory.MIDDLE_PANE);
      gamble.setItem(3, LowOrHighInventory.MIDDLE_PANE);
      gamble.setItem(4, gamemodeloworhigh);
      gamble.setItem(5, LowOrHighInventory.MIDDLE_PANE);
      gamble.setItem(6, LowOrHighInventory.MIDDLE_PANE);
      gamble.setItem(7, LowOrHighInventory.MIDDLE_PANE);
      gamble.setItem(8, LowOrHighInventory.MIDDLE_PANE);
   }
}
